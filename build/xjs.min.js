/*! xjs 2014-02-21 */
var csv2json=function(a,b,c){void 0==b&&(b=","),void 0==c&&(c=!0);var d,e=[],f=a.trim().split("\n");return c&&(d=[],f[0].split(b).forEach(function(a){d.push(a.trim())}),f.splice(0,1)),f.forEach(function(a){for(var f=a.split(b),g={},h=0;h<f.length;h++)g[c?d[h]:h]=f[h];e.push(g)}),e},objects2geojson=function(a){var b={type:"FeatureCollection",features:[]},c=["lat","lng"];return a.forEach(function(a){var d={};d.type="Feature",d.geometry={},d.geometry.type="Point",d.geometry.coordinates=[parseFloat(a.lng),parseFloat(a.lat)],d.properties={},Object.keys(a).forEach(function(b){-1==c.indexOf(b)&&(d.properties[b]=a[b])}),b.features.push(d)}),b},csv2geojson=function(a,b,c){var d=csv2json(a,b,c);return objects2geojson(d)},csv2htmlTable=function(a,b){var c={delimiter:",",hasHeader:!1};b=getMergedOptions(b,c);var d=["<table>"];return 0==b.hasHeader&&d.push("<tbody>"),a.trim().split("\n").forEach(function(a){b.hasHeader&&d.push("<thead>"),rowHtmlList=["<tr>"],a.trim().split(b.delimiter).forEach(function(a){b.hasHeader?rowHtmlList.push("<th>"+a+"</th>"):rowHtmlList.push("<td>"+a+"</td>")}),rowHtmlList.push("</tr>"),d.push(rowHtmlList.join("")),b.hasHeader&&(d.push("</thead><tbody>"),b.hasHeader=!1)}),d.push("</tbody></table>"),d.join("")},getMergedOptions=function(a,b){var c,a=a||{};for(c in b)b.hasOwnProperty(c)&&!a[c]&&(a[c]=b[c]);return a};exports.csv2json=csv2json,exports.objects2geojson=objects2geojson,exports.csv2geojson=csv2geojson,exports.csv2htmlTable=csv2htmlTable,xjs=function(){var a={version:"0.1"};return a.util={},a.util.getHTTime=function(a){var b=new Date,c=b.getTime()+6e4*b.getTimezoneOffset();return new Date(c+36e5*a)},a.util.parseTimeStringToSeconds=function(a){var b=a.split(":"),c=parseInt(b[0]),d=parseInt(b[1]);return 60*60*c+60*d},a.util.getSecondsOfDay=function(a){return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds()},a}();